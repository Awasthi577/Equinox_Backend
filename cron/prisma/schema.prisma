generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model News {
  id        String     @id @default(uuid())
  childNews MiniNews[]
}

model MiniNews {
  id           String     @id @default(uuid())
  title        String
  links        String[]
  content      String?
  pubDate      DateTime
  sources       String[]
  bias         String[]
  youtube      Boolean    @default(false)
  imageUrl     String?
  newsId       String
  category     String
  score        Decimal    @default(0.37)
  bookmarkedBy Bookmark[]
  news         News       @relation(fields: [newsId], references: [id])
  timelinedBy  Timeline[]
  ytViews      Int        @default(0)
  twitter      Boolean    @default(false)
}

model User {
  id             String     @id @default(uuid())
  name           String?
  email          String     @unique
  password       String
  profileImgUrl  String?
  salt           String
  Oauth          Boolean    @default(false)
  bookmarkedNews Bookmark[]
  TimelineNews   Timeline[]
}

model Bookmark {
  userId     String
  miniNewsId String
  miniNews   MiniNews @relation(fields: [miniNewsId], references: [id])
  user       User     @relation(fields: [userId], references: [id])

  @@id([userId, miniNewsId])
}

model Timeline {
  userId     String
  miniNewsId String
  miniNews   MiniNews @relation(fields: [miniNewsId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([userId, miniNewsId])
}
